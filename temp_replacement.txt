  const handleCompleteRecording = async () => {
    if (!record) {
      console.log('‚ùå No record found in handleCompleteRecording');
      router.replace('/(drawer)/my-prayers');
      return;
    }

    try {
      console.log('üîç DEBUGGING: handleCompleteRecording called');
      console.log('üìä Record data:', JSON.stringify(record, null, 2));
      
      // Check if any rakka has teaching count > 0
      let totalTaughtCount = 0;
      const taughtRakkas = [];
      
      for (let i = 0; i < 2; i++) {
        const rakka = record.rakka[i];
        console.log(`üîç Checking rakka ${i + 1}:`, rakka);
        
        if (rakka && rakka.questions && rakka.questions.taught && rakka.taughtCount > 0) {
          console.log(`‚úÖ Rakka ${i + 1} has teaching: count=${rakka.taughtCount}`);
          totalTaughtCount += rakka.taughtCount;
          taughtRakkas.push(i + 1);
        } else {
          console.log(`‚ùå Rakka ${i + 1} no teaching:`, {
            exists: !!rakka,
            hasQuestions: !!(rakka?.questions),
            taught: rakka?.questions?.taught,
            count: rakka?.taughtCount
          });
        }
      }

      console.log(`üìä Total taught count: ${totalTaughtCount}`);
      console.log(`üìä Taught rakkas: ${taughtRakkas}`);

      // If user taught people, create an entry in Da'wah category (ID 13)
      if (totalTaughtCount > 0) {
        console.log('üéØ Creating Da\'wah entry...');
        
        const dateStr = getCurrentLocalDateString();
        const prayerName = PRAYERS.find(prayer => prayer.key === record.prayer)?.label || record.prayer;
        const rakkaText = taughtRakkas.length === 1 ? `ÿßŸÑÿ±ŸÉÿπÿ© ${taughtRakkas[0]}` : `ÿßŸÑÿ±ŸÉÿπÿßÿ™ ${taughtRakkas.join(' Ÿà ')}`;
        const autoComment = `ÿ™ÿπŸÑŸäŸÖ ÿ¢Ÿäÿßÿ™ ÿßŸÑÿµŸÑÿßÿ© - ${prayerName} (${rakkaText}) - ${dateStr}`;
        
        console.log('üìù Da\'wah entry details:', {
          zikrId: 13,
          count: totalTaughtCount,
          date: dateStr,
          comment: autoComment
        });
        
        await createZikrEntry(13, totalTaughtCount, dateStr, autoComment);
        
        console.log('‚úÖ Da\'wah entry created successfully!');
        
        Alert.alert(
          'ÿ™ŸÖ ÿßŸÑÿ≠ŸÅÿ∏',
          `ÿ™ŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿµŸÑÿßÿ© Ÿàÿ•ÿ∂ÿßŸÅÿ© ${totalTaughtCount} ŸÅŸä ŸÇÿ≥ŸÖ ÿßŸÑÿØÿπŸàÿ© - ÿ™ÿπŸÑŸäŸÖ`,
          [{ text: 'ŸÖŸàÿßŸÅŸÇ', onPress: () => router.replace('/(drawer)/my-prayers') }]
        );
      } else {
        console.log('‚ùå No teaching count found, navigating without creating Da\'wah entry');
        // Always navigate to main prayers page after completing
        router.replace('/(drawer)/my-prayers');
      }
    } catch (error) {
      console.error('‚ùå Error in handleCompleteRecording:', error);
      // Still navigate even if Da'wah entry creation fails
      router.replace('/(drawer)/my-prayers');
    }
  };
